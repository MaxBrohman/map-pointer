(window["webpackJsonpmap-pointer"]=window["webpackJsonpmap-pointer"]||[]).push([[0],{33:function(e,t,n){e.exports=n(52)},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(14),c=n.n(o),u=n(8),i=n(23),s=n(7),p=n(20),l=n(13);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d={points:[],newPlacesCoords:[0,0],newPointName:"",error:!1,loading:!0,map:null,router:null},b=n(24),O=n.n(b),y=n(25),v=n(30),E=n(4),g=n.n(E),j=n(11),P=n(5),w=function(e){return e.map},x=function(e){return e.points},D=function(e){return e.router},h=function(e){return e.map(function(e){return e.coords})},N=function(e,t){return e.findIndex(function(e){return e.id===t})},_=function(e,t){return function(n){var r=n.target.value;null!==t&&void 0!==t?e(r,t):e(r)}},T=n(26),I=function(){var e=Object(T.a)(g.a.mark(function e(t,n){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return new Promise(function(e){t.model.events.add("requestsuccess",function(){e(!0)})})},t.model.setReferencePoints(h(n)),e.prev=2,e.next=5,r();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0.message);case 10:n.length&&t.getWayPoints().each(function(e,t){var r=n[t].name;e.options.setName(r),e.options.set({preset:"islands#grayStretchyIcon",iconContentLayout:ymaps.templateLayoutFactory.createClass("".concat(r))})});case 11:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t,n){return e.apply(this,arguments)}}(),A=function(e,t){return e.slice(0,t)},S=function(e,t){return e.slice(t+1)},k=function(e,t,n){return[].concat(Object(j.a)(A(e,n)),[t],Object(j.a)(S(e,n)))},L=g.a.mark(U),M=g.a.mark(R),C=function(e,t){return{name:e,coords:t,id:(new Date).getTime(),isEditing:!1}},F=function(e,t){return[].concat(Object(j.a)(t),[e])};function U(e){var t,n,r,a,o,c,u;return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(P.b)(w);case 3:return n=i.sent,i.next=6,Object(P.b)(D);case 6:return r=i.sent,i.next=9,n.getCenter();case 9:return a=i.sent,i.next=12,C(t,a);case 12:return o=i.sent,i.next=15,Object(P.b)(x);case 15:return c=i.sent,i.next=18,F(o,c);case 18:return u=i.sent,i.next=21,Object(P.a)({type:"NEW_LIST_POINT_ADDED",payload:u});case 21:return i.next=23,I(r,u);case 23:case"end":return i.stop()}},L)}function R(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)("NEW_POINT_ADDED",U);case 2:case"end":return e.stop()}},M)}var W=function(e,t){return new Promise(function(n){ymaps.ready().then(function(){var r=new ymaps.Map("map",{center:[55.76,37.64],zoom:7}),a=function(e,t,n){var r=h(t),a=new ymaps.multiRouter.MultiRoute({referencePoints:r},{boundsAutoApply:!0,editorDrawOver:!1,editorMidPointsType:"way"});a.editor.start(),e.geoObjects.add(a),e.container.fitToViewport();var o=a.getWayPoints().events,c=function e(t){var r=t.get("target").properties.get("index");n({type:"POINT_DRAGGED",payload:{coords:t.get("target").geometry.getCoordinates(),idx:r}}),o.remove("dragend",e)};return o.add("dragstart",function(){o.add("dragend",c)}),a}(r,e,t);n({map:r,router:a})})})},B=function(e){return g.a.mark(function t(){var n,r,a,o;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.b)(x);case 2:return n=t.sent,t.next=5,W(n,e);case 5:if(r=t.sent,a=r.map,o=r.router,!n.length){t.next=11;break}return t.next=11,I(o,n);case 11:return t.next=13,Object(P.a)({type:"MAP_LOADED",payload:{map:a,router:o}});case 13:case"end":return t.stop()}},t)})},G=g.a.mark(H),q=g.a.mark(K);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e,t,n){var r=n[t];return z({},r,"string"===typeof e?{name:e}:"boolean"===typeof e?{isEditing:!r.isEditing}:{coords:e})};function H(e){var t,n,r,a,o,c,u;return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.prop,r=t.id,i.next=3,Object(P.b)(x);case 3:return a=i.sent,i.next=6,N(a,r);case 6:return o=i.sent,i.next=9,V(n,o,a);case 9:return c=i.sent,i.next=12,k(a,c,o);case 12:return u=i.sent,i.next=15,Object(P.a)({type:"MAP_POINTS_LIST_UPDATED",payload:u});case 15:case"end":return i.stop()}},G)}function K(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)("POINT_UPDATED",H);case 2:case"end":return e.stop()}},q)}var Q=g.a.mark(Z),X=g.a.mark($),Y=function(e,t){var n=N(t,e);return[].concat(Object(j.a)(A(t,n)),Object(j.a)(S(t,n)))};function Z(e){var t,n,r,a;return g.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.next=3,Object(P.b)(x);case 3:return n=o.sent,o.next=6,Object(P.b)(D);case 6:return r=o.sent,o.next=9,Y(t,n);case 9:return a=o.sent,o.next=12,Object(P.a)({type:"MAP_POINTS_LIST_UPDATED",payload:a});case 12:return o.next=14,I(r,a);case 14:case"end":return o.stop()}},Q)}function $(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)("DELETE_ITEM",Z);case 2:case"end":return e.stop()}},X)}var ee=g.a.mark(ae),te=g.a.mark(oe);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var re=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{coords:t})};function ae(e){var t,n,r,a,o,c,u;return g.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.idx,r=t.coords,i.next=3,Object(P.b)(x);case 3:return a=i.sent,i.next=6,re(a[n],r);case 6:return o=i.sent,i.next=9,k(a,o,n);case 9:return c=i.sent,i.next=12,Object(P.b)(D);case 12:return u=i.sent,i.next=15,Object(P.a)({type:"MAP_POINTS_LIST_UPDATED",payload:c});case 15:return i.next=17,I(u,c);case 17:case"end":return i.stop()}},ee)}function oe(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.d)("POINT_DRAGGED",ae);case 2:case"end":return e.stop()}},te)}var ce,ue={key:"root",storage:O.a,stateReconciler:y.a,blacklist:["map","loading","error","router"]},ie=Object(p.a)(ue,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type,t.payload),t.type){case"MAP_LOADED":var n=t.payload,r=n.map,a=n.router;return m({},e,{error:!1,loading:!1,map:r,router:a});case"ON_NAME_INPUT":return m({},e,{newPointName:t.payload});case"NEW_LIST_POINT_ADDED":return m({},e,{points:t.payload,newPointName:""});case"MAP_POINTS_LIST_UPDATED":return m({},e,{points:t.payload});default:return e}}),se=Object(v.a)(),pe=Object(s.e)(ie,Object(s.a)(se)),le=Object(p.b)(pe);se.run((ce=pe.dispatch,g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.e)("APP_LOADED",B(ce));case 2:case"end":return e.stop()}},e)}))),se.run(R),se.run(K),se.run($),se.run(oe);var fe=n(27),me=n(28),de=n(32),be=n(29),Oe=n(31),ye=function(e,t){return{type:"POINT_UPDATED",payload:{prop:t,id:e}}},ve=(n(46),function(e){var t=e.name,n=e.onDelete,r=e.id,o=e.onEdit;return a.a.createElement("li",{className:"list-group-item"},t,a.a.createElement("button",{type:"button",className:"btn btn-outline-danger float-right list-item-btn",onClick:function(){return n(r)}},a.a.createElement("i",{className:"fa fa-trash"})),a.a.createElement("button",{type:"button",className:"btn btn-outline-secondary float-right list-item-btn",onClick:function(){return o(r)}},a.a.createElement("i",{className:"fa fa-edit"})))}),Ee=(n(47),function(e){var t=e.name,n=e.onInput,r=e.onFormSubmit,o=e.btnLabel;return a.a.createElement("form",{className:"input-group mb-3",onSubmit:function(e){e.preventDefault(),r(t)}},a.a.createElement("input",{type:"text",value:t,className:"form-control name-input",placeholder:"name your point","aria-label":"name for point on a map",onChange:_(n),required:!0}),a.a.createElement("div",{className:"input-group-append"},a.a.createElement("button",{className:"btn btn-outline-secondary",type:"submit"},o)))}),ge=Object(u.b)(null,function(e){return{onDelete:function(t){return e(function(e){return{type:"DELETE_ITEM",payload:e}}(t))},onInput:function(t,n){return e(ye(t,n))},onFormSubmit:function(t){return e(ye(t,!0))},onEdit:function(t){return e(ye(t,!0))}}})(function(e){var t=e.name,n=e.id,r=e.onDelete,o=e.isEditing,c=e.onInput,u=e.onFormSubmit,i=e.onEdit;if(o){return a.a.createElement(Ee,{name:t,btnLabel:"Submit",onInput:function(e){return function(t){return c(e,t)}}(n),onFormSubmit:function(e){return function(){return u(e)}}(n)})}return a.a.createElement(ve,{name:t,id:n,onDelete:r,onEdit:i})}),je=(n(48),Object(u.b)(function(e){return{points:e.points}})(function(e){return a.a.createElement("ul",{className:"list-group"},e.points.map(function(e){var t=e.name,n=e.id,r=e.isEditing;return a.a.createElement(ge,{name:t,key:n,id:n,isEditing:r})}))})),Pe=(n(49),Object(u.b)(function(e){return{router:e.router}})(function(e){return a.a.createElement("div",{className:"map",id:"map",style:{width:"100%",height:"100%"}})})),we=(n(50),function(){return a.a.createElement("div",{className:"lds-css ng-scope"},a.a.createElement("div",{className:"lds-spinner",style:{width:"100%",height:"100%"}},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))}),xe=(n(51),function(e){function t(e){var n;return Object(fe.a)(this,t),(n=Object(de.a)(this,Object(be.a)(t).call(this,e))).props=void 0,n.inputBtnLabel=void 0,n.props=e,n.inputBtnLabel="AddPoint",n}return Object(Oe.a)(t,e),Object(me.a)(t,[{key:"componentDidMount",value:function(){this.props.onAppLoaded()}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.onInput,r=e.onFormSubmit;return a.a.createElement("div",{className:"container d-flex align-items-stretch app-container"},a.a.createElement("div",{className:"d-flex flex-column flex-grow-1 left-container"},a.a.createElement(Ee,{btnLabel:this.inputBtnLabel,name:t,onInput:n,onFormSubmit:r}),a.a.createElement(je,null)),a.a.createElement("div",{className:"d-flex flex-column flex-grow-1"},a.a.createElement(Pe,null)),this.props.loading&&a.a.createElement(we,null))}}]),t}(a.a.Component)),De=Object(u.b)(function(e){return{loading:e.loading,error:e.error,name:e.newPointName}},function(e){return{onAppLoaded:function(){return e({type:"APP_LOADED"})},onInput:function(t){return e(function(e){return{type:"ON_NAME_INPUT",payload:e}}(t))},onFormSubmit:function(t){return e(function(e){return{type:"NEW_POINT_ADDED",payload:e}}(t))}}})(xe);c.a.render(a.a.createElement(u.a,{store:pe},a.a.createElement(i.a,{persistor:le},a.a.createElement(De,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.fc4978a5.chunk.js.map